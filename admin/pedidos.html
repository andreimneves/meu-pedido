<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos - Meu Pedido</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .status-novo { background: #ff9800; color: white; padding: 3px 8px; border-radius: 12px; }
        .status-preparando { background: #2196F3; color: white; padding: 3px 8px; border-radius: 12px; }
        .status-pronto { background: #4CAF50; color: white; padding: 3px 8px; border-radius: 12px; }
        .status-entregue { background: #9C27B0; color: white; padding: 3px 8px; border-radius: 12px; }
        .status-cancelado { background: #f44336; color: white; padding: 3px 8px; border-radius: 12px; }
        
        .filtros {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filtro-btn {
            padding: 8px 20px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filtro-btn:hover {
            background: #f0f0f0;
        }
        
        .filtro-btn.active {
            background: #C83232;
            color: white;
            border-color: #C83232;
        }
        
        .status-select {
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #ddd;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="admin-header">
        <h1>ğŸ½ï¸ Meu Pedido - Painel Administrativo</h1>
        <div class="user-info">
            <span>ğŸ‘¤ DL Crepes e Lanches</span>
            <button class="logout" onclick="logout()">ğŸšª Sair</button>
        </div>
    </div>
    
    <div class="admin-container">
        <div class="admin-sidebar">
            <ul>
                <li><a href="dashboard.html">ğŸ“Š Dashboard</a></li>
                <li><a href="produtos.html">ğŸ“¦ Produtos</a></li>
                <li><a href="categorias.html">ğŸ“ Categorias</a></li>
                <li><a href="pedidos.html" class="active">ğŸ“‹ Pedidos</a></li>
                <li><a href="config.html">âš™ï¸ ConfiguraÃ§Ãµes</a></li>
            </ul>
        </div>
        
        <div class="admin-content">
            <h1>ğŸ“‹ Pedidos</h1>
            
            <div class="filtros" id="filtros">
                <button class="filtro-btn active" onclick="filtrarPedidos('todos')">Todos</button>
                <button class="filtro-btn" onclick="filtrarPedidos('novo')">ğŸ†• Novos</button>
                <button class="filtro-btn" onclick="filtrarPedidos('preparando')">ğŸ‘¨â€ğŸ³ Preparando</button>
                <button class="filtro-btn" onclick="filtrarPedidos('pronto')">âœ… Pronto</button>
                <button class="filtro-btn" onclick="filtrarPedidos('entregue')">ğŸšš Entregue</button>
                <button class="filtro-btn" onclick="filtrarPedidos('cancelado')">âŒ Cancelado</button>
            </div>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Cliente</th>
                            <th>Telefone</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Data</th>
                            <th>AÃ§Ãµes</th>
                        </tr>
                    </thead>
                    <tbody id="pedidosTable">
                        <tr><td colspan="7">Carregando pedidos...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        let todosPedidos = [];
        let filtroAtual = 'todos';
        
        function filtrarPedidos(filtro) {
            filtroAtual = filtro;
            
            document.querySelectorAll('.filtro-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const pedidosFiltrados = filtro === 'todos' 
                ? todosPedidos 
                : todosPedidos.filter(p => p.status === filtro);
            
            exibirPedidos(pedidosFiltrados);
        }
        
        function exibirPedidos(pedidos) {
            const tbody = document.getElementById('pedidosTable');
            
            if (pedidos.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7">Nenhum pedido encontrado</td></tr>';
                return;
            }
            
            tbody.innerHTML = pedidos.map(p => {
                const data = new Date(p.data_pedido).toLocaleString('pt-BR');
                return `
                    <tr>
                        <td>#${p.id}</td>
                        <td>${p.cliente_nome}</td>
                        <td>${p.cliente_telefone}</td>
                        <td>R$ ${parseFloat(p.total).toFixed(2)}</td>
                        <td><span class="status-${p.status}">${p.status}</span></td>
                        <td>${data}</td>
                        <td>
                            <select class="status-select" onchange="atualizarStatus(${p.id}, this.value)">
                                <option value="novo" ${p.status === 'novo' ? 'selected' : ''}>Novo</option>
                                <option value="preparando" ${p.status === 'preparando' ? 'selected' : ''}>Preparando</option>
                                <option value="pronto" ${p.status === 'pronto' ? 'selected' : ''}>Pronto</option>
                                <option value="entregue" ${p.status === 'entregue' ? 'selected' : ''}>Entregue</option>
                                <option value="cancelado" ${p.status === 'cancelado' ? 'selected' : ''}>Cancelado</option>
                            </select>
                        </td>
                    </tr>
                `;
            }).join('');
        }
        
        // A funÃ§Ã£o carregarPedidos jÃ¡ estÃ¡ no script.js
    </script>
</body>
</html>